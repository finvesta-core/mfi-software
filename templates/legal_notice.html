<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Legal Notice - FINVESTACORE SMALL CAPITAL PVT LTD</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: #333;
        }
        header {
            background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
            color: white;
            padding: 15px 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            border-radius: 10px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .header-left {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .logo {
            width: 50px;
            height: 50px;
            border-radius: 8px;
        }
        .header-center {
            flex: 1;
            text-align: center;
        }
        .header-center h1 {
            margin: 0;
            font-size: 1.5em;
        }
        .back-button {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 8px 15px;
            border-radius: 5px;
            text-decoration: none;
            font-weight: bold;
            transition: all 0.3s;
        }
        .back-button:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }
        h2 {
            color: #dc3545;
            text-align: center;
            margin-bottom: 20px;
        }
        .form-group {
            margin-bottom: 15px;
        }
        .form-group label {
            display: block;
            font-weight: bold;
            margin-bottom: 5px;
            color: #dc3545;
        }
        .form-group input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }
        .btn {
            background: #dc3545;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin-right: 10px;
        }
        .btn:hover {
            background: #c82333;
        }
        .btn-success {
            background: #28a745;
        }
        .btn-success:hover {
            background: #218838;
        }
        .error {
            color: #dc3545;
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .notice-section {
            margin-top: 30px;
            padding: 20px;
            border: 2px solid #dc3545;
            border-radius: 10px;
            background: #fff5f5;
        }
        .notice-header {
            text-align: center;
            font-weight: bold;
            font-size: 1.2em;
            color: #dc3545;
            margin-bottom: 20px;
            border-bottom: 2px solid #dc3545;
            padding-bottom: 10px;
        }
        .notice-content {
            line-height: 1.6;
            text-align: justify;
        }
        .notice-content p {
            margin-bottom: 15px;
        }
        .borrower-details {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .print-section {
            text-align: center;
            margin-top: 20px;
        }
        @media print {
            body * {
                visibility: hidden;
            }
            .container, .container * {
                visibility: visible;
            }
            .container {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                margin: 0;
                padding: 20px;
                box-shadow: none;
                background: white;
            }
            header {
                display: block !important;
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                background: white !important;
                color: black !important;
                box-shadow: 0 2px 5px rgba(0,0,0,0.1);
                z-index: 1000;
                padding: 10px;
            }
            .back-button, .form-group, .print-section {
                display: none !important;
            }
            .notice-section {
                margin-top: 80px;
            }
            .notice-content {
                font-size: 12px;
            }
            @page {
                margin: 1in;
                size: A4;
            }
        }
        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-left">
            <img src="{{ url_for('static', filename='fin.jpg') }}" alt="Logo" class="logo">
        </div>
        <div class="header-center">
            <h1>FINVESTACORE SMALL CAPITAL PVT LTD</h1>
            <p>Legal Notice for Overdue EMI</p>
        </div>
        <a href="/" class="back-button">Back to Dashboard</a>
    </header>

    <div class="container">
        <h2><i class="fas fa-gavel"></i> Generate Legal Notice</h2>
        
        {% if error %}
            <div class="error">{{ error }}</div>
        {% endif %}

        <form method="POST">
            <div class="form-group">
                <label for="loan_id">Loan ID (e.g., PL0001):</label>
                <input type="text" id="loan_id" name="loan_id" value="{{ request.form.loan_id if request.form else '' }}" required placeholder="Enter Loan ID">
            </div>
            <button type="submit" class="btn btn-success"><i class="fas fa-search"></i> Fetch Details & Generate Notice</button>
        </form>

        {% if notice_data %}
            <div class="notice-section" style="display: block;">
                <div class="notice-header">
                    LEGAL NOTICE UNDER SECTION 138 OF NEGOTIABLE INSTRUMENTS ACT, 1881
                </div>
                <div class="notice-content">
                    <p><strong>Date:</strong> {{ '24 October 2025' }} (Current Date)</p>
                    
                    <div class="borrower-details">
                        <strong>To,</strong><br>
                        <strong>{{ notice_data.full_name }}</strong><br>
                        {% if notice_data.father_name %}S/o {{ notice_data.father_name }}<br>{% endif %}
                        {{ notice_data.address or 'N/A' }}, {{ notice_data.pincode or '' }}<br>
                        Phone: {{ notice_data.phone_number or 'N/A' }}<br>
                        <strong>Loan ID: {{ notice_data.loan_id }}</strong>
                    </div>
                    
                    <p>Subject: <strong>Recovery of Outstanding Loan Amount - Urgent Demand Notice</strong></p>
                    
                    <p>Dear Sir/Madam,</p>
                    
                    <p>We, <strong>FINVESTACORE SMALL CAPITAL PRIVATE LIMITED</strong>, a company incorporated under the Companies Act, 2013, having its registered office at <strong>PURANA BAZAR NEAR SUBHASH CHOWK, BUDAUN 243601 U.P.</strong>, Phone No: <strong>7253946012</strong>, E-Mail: <strong>finvesta.core@gmail.com</strong>, CIN: <strong>U64820UP2024PTC209483</strong> (hereinafter referred to as the "Lender"), do hereby serve upon you this LEGAL NOTICE.</p>
                    
                    <p>1. That you had approached us for a loan facility and vide Loan Agreement dated <strong>{{ notice_data.loan_date_formatted }}</strong>, we sanctioned a loan of <strong>â‚¹{{ "%.2f"|format(notice_data.amount) }}</strong> (Rupees {{ "%.2f"|format(notice_data.amount) }} only) to you, bearing Loan ID <strong>{{ notice_data.loan_id }}</strong>, repayable in <strong>{{ notice_data.emi }}</strong> EMIs starting from <strong>{{ notice_data.emi_start_formatted }}</strong>.</p>
                    
                    <p>2. That as per the terms of the loan agreement, you were required to pay EMIs regularly. However, you have defaulted in payment of EMIs since <strong>{{ notice_data.last_emi_date_formatted }}</strong> (Last EMI Payment Date). The total outstanding due amount as on date is <strong>{{ notice_data.due_amount_formatted }}</strong> (Rupees {{ "%.2f"|format(notice_data.due_amount) }} only), inclusive of principal and interest.</p>
                    
                    <p>3. That despite repeated reminders and demands, you have failed and neglected to pay the aforesaid outstanding amount, thereby committing breach of the loan agreement.</p>
                    
                    <p>4. We hereby call upon you to make payment of the aforesaid outstanding amount of <strong>{{ notice_data.due_amount_formatted }}</strong> within <strong>15 (FIFTEEN) DAYS</strong> from the date of receipt of this notice, failing which we shall be constrained to initiate appropriate legal proceedings against you under Section 138 of the Negotiable Instruments Act, 1881, and other applicable laws, including recovery of the entire due amount along with interest, costs, and legal expenses.</p>
                    
                    <p>5. This notice is being issued without prejudice to our rights and remedies under the law.</p>
                    
                    <p><strong>Please treat this as urgent.</strong></p>
                    
                    <p><strong>For FINVESTACORE SMALL CAPITAL PRIVATE LIMITED</strong></p>
                    <p><strong>Authorized Signatory</strong></p>
                    <p><strong>Date: {{ '24 October 2025' }}</strong> | <strong>Place: Budaun, U.P.</strong></p>
                </div>
            </div>
            
            <div class="print-section">
                <button onclick="window.print()" class="btn"><i class="fas fa-print"></i> Print Notice</button>
                <a href="{{ url_for('legal_notice') }}" class="btn">Generate New Notice</a>
            </div>
        {% endif %}
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>